# 3.6. Меню настроек

Меню настроек в GOAT — это гибкая система для управления графикой, звуком, управлением и интерфейсом. Она состоит из глобального синглтона (`goat_settings`) и UI-сцены, которую можно расширять под нужды проекта.

## Архитектура

- **Глобальный синглтон**: `goat_settings` управляет всеми настройками, их сохранением и применением. Все параметры хранятся в `user://settings.cfg`.
- **UI-сцена**: `Settings.tscn` — окно настроек, которое можно вызывать из меню или во время игры. По умолчанию используется стандартная сцена, но можно подключить свою.

Подробнее о расширении меню настроек см. [Вспомогательные UI-сцены](./helper_scenes.md#settings).

## Основные параметры по умолчанию

- Графика: полноэкранный режим, тени, отражения, свечение, SSAO
- Звук: громкость музыки, громкость эффектов
- Управление: чувствительность мыши
- Интерфейс: субтитры, прицел, язык

## Как добавить или изменить параметр

1. Добавьте новую запись в массив `DEFAULT_VALUES` в `goat_settings.gd`:
    ```gdscript
    ["graphics", "new_option", true],
    ```
2. Для доступа к значению используйте:
    ```gdscript
    var value = goat_settings.get_value("graphics", "new_option")
    goat_settings.set_value("graphics", "new_option", false)
    ```
3. Для отслеживания изменений подпишитесь на сигнал:
    ```gdscript
    goat_settings.connect("value_changed_graphics_new_option", self._on_new_option_changed)
    ```

## Работа с UI-меню

- Открытие меню: по умолчанию клавиша `Esc` (`goat_dismiss`), либо через главное меню.
- При открытии меню автоматически показывается курсор мыши и блокируется управление игроком.
- Все изменения применяются сразу и могут быть автоматически сохранены.

## Пример: добавить свой пункт настроек

```gdscript
# В goat_settings.gd
DEFAULT_VALUES.append(["gameplay", "show_tutorials", true])

# В любом скрипте
if goat_settings.get_value("gameplay", "show_tutorials"):
    show_tutorial()
```

## Кастомизация и расширение

- Можно создать свою сцену настроек и подключить её вместо стандартной (см. `Settings.gd`).
- Для сложных параметров используйте отдельные UI-элементы и подписывайтесь на сигналы `goat_settings`.
- Все параметры автоматически сохраняются между сессиями.
